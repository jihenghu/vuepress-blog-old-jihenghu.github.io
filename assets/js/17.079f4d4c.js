(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{304:function(t,s,a){t.exports=a.p+"assets/img/erai-rh.666fdeb1.png"},357:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#概述"}},[t._v("概述")])]),n("li",[n("a",{attrs:{href:"#处理流程"}},[t._v("处理流程")]),n("ul",[n("li",[n("a",{attrs:{href:"#文件夹内容"}},[t._v("- 文件夹内容")])])])]),n("li",[n("a",{attrs:{href:"#输出"}},[t._v("-输出")])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),n("p",[t._v("本节简要的介绍对于"),n("a",{attrs:{href:"https://apps.ecmwf.int/datasets/data/interim-full-daily/levtype=pl/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ERA-Interim"),n("OutboundLink")],1),t._v("的处理。")]),t._v(" "),n("p",[t._v("和之前的AMSR-E MLSE反演时采用的ERA-20C相比，Interim的分辨率较差，考虑反演时间，必须选择Interim")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th"),t._v(" "),n("th",[t._v("Interim")]),t._v(" "),n("th",[t._v("20C")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("Spatial resolution")]),t._v(" "),n("td",[t._v("0.125"),n("sup",[t._v("o")])]),t._v(" "),n("td",[t._v("0.125"),n("sup",[t._v("o")])])]),t._v(" "),n("tr",[n("td",[t._v("Temporal resolution")]),t._v(" "),n("td",[n("strong",[t._v("6 hr.")])]),t._v(" "),n("td",[t._v("3 hr.")])]),t._v(" "),n("tr",[n("td",[t._v("Pressure levels")]),t._v(" "),n("td",[t._v("37")]),t._v(" "),n("td",[t._v("37")])]),t._v(" "),n("tr",[n("td",[t._v("Range")]),t._v(" "),n("td",[t._v("Jan 1979 - Aug 2019")]),t._v(" "),n("td",[t._v("Jan 1900 - "),n("strong",[t._v("Dec 2010")])])])])]),t._v(" "),n("p",[t._v("使用的参数如下，")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("位势高度廓线 Geopotential = Z*g （高度*重力加速度）；")])]),t._v(" "),n("li",[n("p",[t._v("湿度廓线 Relative Humidity（%）；")])]),t._v(" "),n("li",[n("p",[t._v("温度廓线 Temperature （K）；")])]),t._v(" "),n("li",[n("p",[t._v("气压分层 PMB（pressure in mb）；")])]),t._v(" "),n("li",[n("p",[t._v("地表温度场 LST（K）；")])]),t._v(" "),n("li",[n("p",[t._v("2m温度场 T2m (K) ；")])]),t._v(" "),n("li",[n("p",[t._v("地表压强 LSP （mb）")])])]),t._v(" "),n("h2",{attrs:{id:"处理流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#处理流程"}},[t._v("#")]),t._v(" 处理流程")]),t._v(" "),n("p",[t._v("本步骤对ERA的数据处理十分简单，除了提取参数之外，对处于地面以下（气压高于地表气压）的廓线层进行了缺测，如图3.1，对于湿度廓线的地形处理以后可以看到35度纬度处的山地。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(304),alt:"erai-rh"}})]),t._v(" "),n("p",{staticStyle:{"text-align":"center",color:"darkred"}},[t._v("图 3.1 对ERA廓线进行地形处理")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("我们采用了全部37层数据提供大气廓线，进行水凝物廓线的制作，云高的定位和水汽微波辐射贡献的计算；")])]),t._v(" "),n("li",[n("p",[t._v("去除底层地形以后剩下的廓线层数newL在反演时作为实际微波辐射透过的层数并最终输出到MLSE产品中；")])])]),t._v(" "),n("h3",{attrs:{id:"文件夹内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文件夹内容"}},[t._v("#")]),t._v(" - 文件夹内容")]),t._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("- erai.process.ncl  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#主要的处理程序，NCL语言编写")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("需要在脚本内部修改处理日期")]),t._v(" "),n("div",{staticClass:"language-NCL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('dl=(/31,29,31,30,31,30,31,31,30,31,30,31/)\nyyyy="2016"   ;year\ndo  mm=1,12   ;month\ndo  dd = 1,dl(mm-1) ;day\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ncl")]),t._v(" era20c.preprocess.ncl \n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("对于批量处理这样比较麻烦，并且涉及到闰年，有兴趣可以改写成NCL带参形式运行和编写批量处理脚本，详细可以参考上一节。")]),t._v(" "),n("h2",{attrs:{id:"输出"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#输出"}},[t._v("#")]),t._v(" -输出")]),t._v(" "),n("p",[t._v("文件的输出是二进制形式，fortran读示例：")]),t._v(" "),n("div",{staticClass:"language-fortran line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-fortran"}},[n("code",[t._v("        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("real")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("  pmb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("L"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("tkk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nlon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("nlat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("L"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("real")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("  rhh"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nlon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("nlat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("L"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("zz"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nlon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("nlat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("L"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("real")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("  late"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nlat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("lone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nlon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \t\t\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("real")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("  psurf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nlon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("nlat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" skt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nlon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("nlat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("real")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("  t2mg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nlon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("nlat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n        \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("file")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" chfile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("form"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unformatted"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("access"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sequential"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ERR"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("401")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\n\t  \n\t         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pmb\n\t         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" tkk\n\t         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" zz\n\t         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" rhh\n\t         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" psurf\n\t         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" skt\n\t         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" t2mg    \t\t    \n\t   \t\t \n\t\t     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" late\n             "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" lone \n\t         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br")])]),n("hr"),t._v(" "),n("p",[t._v("©Jiheng Hu 2019")])])}),[],!1,null,null,null);s.default=e.exports}}]);