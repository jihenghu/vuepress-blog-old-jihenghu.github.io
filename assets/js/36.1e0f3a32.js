(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{400:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#工作目录"}},[s._v("工作目录")])]),n("li",[n("a",{attrs:{href:"#install"}},[s._v("Install")]),n("ul",[n("li",[n("a",{attrs:{href:"#安装-python3-，pip"}},[s._v("安装 python3 ，pip")])]),n("li",[n("a",{attrs:{href:"#安装-django"}},[s._v("安装 Django")])])])]),n("li",[n("a",{attrs:{href:"#创建-django-工程"}},[s._v("创建Django工程")])]),n("li",[n("a",{attrs:{href:"#开启服务"}},[s._v("开启服务")])]),n("li",[n("a",{attrs:{href:"#一些配置"}},[s._v("一些配置")])]),n("li",[n("a",{attrs:{href:"#创建-blog-app"}},[s._v("创建 blog app")])]),n("li",[n("a",{attrs:{href:"#migration"}},[s._v("migration")]),n("ul",[n("li",[n("a",{attrs:{href:"#选择数据库版本"}},[s._v("选择数据库版本")])])])])])]),n("p"),s._v(" "),n("p",[s._v("环境：cmd(windows NT)"),n("br"),s._v("\n工具：Python (V 3.6.4)")]),s._v(" "),n("h2",{attrs:{id:"工作目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#工作目录"}},[s._v("#")]),s._v(" 工作目录")]),s._v(" "),n("div",{staticClass:"language-cmd line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("C:\\Users\\Herrera>mkdir djangoopt\nC:\\Users\\Herrera>cd djangoopt\nC:\\Users\\Herrera\\djangoopt>dir #查看文件夹内容\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"install"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[s._v("#")]),s._v(" Install")]),s._v(" "),n("h3",{attrs:{id:"安装-python3-，pip"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-python3-，pip"}},[s._v("#")]),s._v(" 安装 python3 ，pip")]),s._v(" "),n("p",[s._v("官网下载软件包：python-3.6.4-amd64.exe"),n("br"),s._v("\n双击安装：期间会有勾选PIP 安装的选项，顺带安装pip工具")]),s._v(" "),n("div",{staticClass:"language-cmd line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("C:\\Users\\Herrera>python -V\nPython 3.6.4\n\nC:\\Users\\Herrera>pip -V\npip 9.0.1 from c:\\users\\herrera\\appdata\\local\\programs\\python\\python36\\lib\\site-packages (python 3.6)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"安装-django"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-django"}},[s._v("#")]),s._v(" 安装 Django")]),s._v(" "),n("p",[s._v("我们用 "),n("code",[s._v("django==1.10.6")]),s._v("来安装指定的 "),n("code",[s._v("Django")]),s._v(" 版本以保证和教程中的一致。")]),s._v(" "),n("div",{staticClass:"language-cmd line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("C:\\WINDOWS\\system32>pip install django==1.10.6\nYou are using pip version 9.0.1, however version 9.0.2 is available.\nYou should consider upgrading via the 'python -m pip install --upgrade pip' command.\n\nC:\\Users\\Herrera>pip install django==1.10.6\nCollecting django==1.10.6\n  Downloading Django-1.10.6-py2.py3-none-any.whl (6.8MB)\n    100% |████████████████████████████████| 6.8MB 121kB/s\nInstalling collected packages: django\nSuccessfully installed django-1.10.6\nYou are using pip version 9.0.1, however version 9.0.2 is available.\nYou should consider upgrading via the 'python -m pip install --upgrade pip' command.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("如果直接 "),n("code",[s._v("pip install django")]),s._v(" 的话有可能安装最新的 "),n("code",[s._v("Django")]),s._v(" 发行版本，而不是 "),n("code",[s._v("Django 1.10.6")]),s._v("。")]),s._v(" "),n("p",[s._v("测试：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("C"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\Users\\Herrera"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("python\nPython "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("d48eceb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("06")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MSC v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1900")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bit "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("AMD64"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" on win32\nType "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"help"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"copyright"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"credits"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("or")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"license"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" more information"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" django\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_version"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.10")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".6")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("查看pip安装记录：")]),s._v(" "),n("div",{staticClass:"language-cmd line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("C:\\Users\\Herrera>pip list\nDEPRECATION: The default format will switch to columns in the future. You can use --format=(legacy|columns) (or define a format=(legacy|columns) in your pip.conf under the [list] section) to disable this warning.\nDjango (1.10.6)\npip (9.0.1)\nsetuptools (28.8.0)\nwheel (0.30.0)\nYou are using pip version 9.0.1, however version 9.0.2 is available.\nYou should consider upgrading via the 'python -m pip install --upgrade pip' command.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"创建django工程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建django工程"}},[s._v("#")]),s._v(" 创建"),n("code",[s._v("Django")]),s._v("工程")]),s._v(" "),n("p",[s._v("在我们的工作目录 djangoopt 下创建:")]),s._v(" "),n("div",{staticClass:"language-cmd line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("C:\\Users\\Herrera\\djangoopt>django-admin startproject djblog\nC:\\Users\\Herrera\\djangoopt>tree . /F\n文件夹 PATH 列表\n卷序列号为 B035-7893\nC:\\USERS\\HERRERA\\DJANGOOPT\n│  build.django.blog.md\n│\n└─djblog\n    │  manage.py\n    │\n    └─djblog\n            settings.py\n            urls.py\n            wsgi.py\n            __init__.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("这就是我们的博客后台文件："),n("br"),s._v("\n最顶层的 djblog\\ 目录是我们刚刚指定的工程目录。djblog\\ 目录下面有一个 manage.py 文件，manage 是管理的意思，顾名思义 manage.py 就是 Django 为我们生成的管理这个项目的 Python 脚本文件，以后用到时会再次介绍。与 manage.py 同级的还有一个 djblog\\ 的目录，这里面存放了一些 Django 的配置文件，例如 settings.py、urls.py 等等，以后用到时会详细介绍。")]),s._v(" "),n("p",[s._v("manage.py")]),s._v(" "),n("div",{staticClass:"language-python3 line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('#!/usr/bin/env python\nimport os\nimport sys\n\nif __name__ == "__main__":\n    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "djblog.settings")\n    try:\n        from django.core.management import execute_from_command_line\n    except ImportError:\n        # The above import may fail for some other reason. Ensure that the\n        # issue is really that Django is missing to avoid masking other\n        # exceptions on Python 2.\n        try:\n            import django\n        except ImportError:\n            raise ImportError(\n                "Couldn\'t import Django. Are you sure it\'s installed and "\n                "available on your PYTHONPATH environment variable? Did you "\n                "forget to activate a virtual environment?"\n            )\n        raise\n    execute_from_command_line(sys.argv)\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h2",{attrs:{id:"开启服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开启服务"}},[s._v("#")]),s._v(" 开启服务")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("C:\\Users\\Herrera\\djangoopt\\djblog>python manage.py runserver\nPerforming system checks...\n\nSystem check identified no issues (0 silenced).\n\nYou have 13 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.\nRun 'python manage.py migrate' to apply them.\nMarch 17, 2018 - 14:22:42\nDjango version 1.10.6, using settings 'djblog.settings'\nStarting development server at http://127.0.0.1:8000/\nQuit the server with CTRL-BREAK.\n[17/Mar/2018 14:23:25] \"GET / HTTP/1.1\" 200 1767\n[17/Mar/2018 14:25:03] \"GET / HTTP/1.1\" 200 1767\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("说明服务已开启"),n("br"),s._v("\n登陆"),n("code",[s._v("http://127.0.0.1:8000/")]),s._v(" 查看："),n("br"),s._v(" "),n("img",{attrs:{src:"%7Bfilename%7D/images/hello.png",alt:"ceshi"}})]),s._v(" "),n("p",[s._v("命令栏工具下按 Ctrl + c 可以退出开发服务器（按一次没用的话连续多按几次）。重新开启则再次运行 python manage.py runserver 。")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"一些配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一些配置"}},[s._v("#")]),s._v(" 一些配置")]),s._v(" "),n("p",[s._v("C:\\Users\\Herrera\\djangoopt\\djblog\\djblog\\setting.py")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把英文改为中文")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#LANGUAGE_CODE = 'en-us'")]),s._v("\nLANGUAGE_CODE "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zh-hans'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把国际时区改为中国时区")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#TIME_ZONE = 'UTC'")]),s._v("\nTIME_ZONE "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Asia/Shanghai'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("再次开启服务："),n("br"),s._v(" "),n("img",{attrs:{src:"%7Bfilename%7D/images/hello1.png",alt:"ceshi1"}})]),s._v(" "),n("h2",{attrs:{id:"创建-blog-app"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建-blog-app"}},[s._v("#")]),s._v(" 创建 blog app")]),s._v(" "),n("div",{staticClass:"language-cmd line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("C:\\Users\\Herrera\\djangoopt\\djblog>python manage.py startapp blog\n\nC:\\Users\\Herrera\\djangoopt\\djblog>tree /F blog\n文件夹 PATH 列表\n卷序列号为 B035-7893\nC:\\USERS\\HERRERA\\DJANGOOPT\\DJBLOG\\BLOG\n│  admin.py\n│  apps.py\n│  models.py\n│  tests.py\n│  views.py\n│  __init__.py\n│\n└─migrations\n        __init__.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("这个应用的文件夹结构 Django 已经为我们建立好了，但它还只是包含各种文件的一个文件夹而已，Django 目前还不知道这是一个应用。我们得告诉 Django 这是我们建立的应用，专业一点说就是在 Django 的配置文件中注册这个应用。")]),s._v(" "),n("p",[s._v("C:\\Users\\Herrera\\djangoopt\\djblog\\djblog\\setting.py")]),s._v(" "),n("div",{staticClass:"language-python# Application definition line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n\t'blog',#注册blog应用\n]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"migration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#migration"}},[s._v("#")]),s._v(" migration")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("C:\\Users\\Herrera\\djangoopt\\djblog>python manage.py makemigrations\nMigrations for 'blog':\n  blog\\migrations\\0001_initial.py:\n    - Create model Category\n    - Create model Post\n    - Create model Tag\n    - Add field tags to post\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("C:\\Users\\Herrera\\djangoopt\\djblog\\blog\\migrations 下面会多出："),n("code",[s._v("0001_initial.py")]),s._v(" 这个文件是 Django 用来记录我们对模型做了哪些修改的文件。")]),s._v(" "),n("p",[s._v("go on")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("C:\\Users\\Herrera\\djangoopt\\djblog>python manage.py migrate\nOperations to perform:\n  Apply all migrations: admin, auth, blog, contenttypes, sessions\nRunning migrations:\n  Applying contenttypes.0001_initial... OK\n  Applying auth.0001_initial... OK\n  Applying admin.0001_initial... OK\n  Applying admin.0002_logentry_remove_auto_add... OK\n  Applying contenttypes.0002_remove_content_type_name... OK\n  Applying auth.0002_alter_permission_name_max_length... OK\n  Applying auth.0003_alter_user_email_max_length... OK\n  Applying auth.0004_alter_user_username_opts... OK\n  Applying auth.0005_alter_user_last_login_null... OK\n  Applying auth.0006_require_contenttypes_0002... OK\n  Applying auth.0007_alter_validators_add_error_messages... OK\n  Applying auth.0008_alter_user_username_max_length... OK\n  Applying blog.0001_initial... OK\n  Applying sessions.0001_initial... OK\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("不过此时还只是告诉了 Django 我们做了哪些改变，为了让 Django 真正地为我们创建数据库表，接下来又执行了 python manage.py migrate 命令。"),n("br"),s._v("\nDjango 通过检测应用中 migrations\\ 目录下的文件，得知我们对数据库做了哪些操作，然后它把这些操作翻译成数据库操作语言，从而把这些操作作用于真正的数据库。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('C:\\Users\\Herrera\\djangoopt\\djblog>python manage.py sqlmigrate blog 0001\nBEGIN;\n--\n-- Create model Category\n--\nCREATE TABLE "blog_category" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(100) NOT NULL);\n--\n-- Create model Post\n--\nCREATE TABLE "blog_post" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "title" varchar(70) NOT NULL, "body" text NOT NULL, "created_time" datetime NOT NULL, "modified_time" datetime NOT NULL, "excerpt" varchar(200) NOT NULL, "author_id" integer NOT NULL REFERENCES "auth_user" ("id"), "category_id" integer NOT NULL REFERENCES "blog_category" ("id"));\n--\n-- Create model Tag\n--\nCREATE TABLE "blog_tag" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(100) NOT NULL);\n--\n-- Add field tags to post\n--\nCREATE TABLE "blog_post_tags" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "post_id" integer NOT NULL REFERENCES "blog_post" ("id"), "tag_id" integer NOT NULL REFERENCES "blog_tag" ("id"));\nCREATE INDEX "blog_post_4f331e2f" ON "blog_post" ("author_id");\nCREATE INDEX "blog_post_b583a629" ON "blog_post" ("category_id");\nCREATE UNIQUE INDEX "blog_post_tags_post_id_4925ec37_uniq" ON "blog_post_tags" ("post_id", "tag_id");\nCREATE INDEX "blog_post_tags_f3aa1999" ON "blog_post_tags" ("post_id");\nCREATE INDEX "blog_post_tags_76f094bc" ON "blog_post_tags" ("tag_id");\nCOMMIT;\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("p",[s._v("你将看到输出了经 Django 翻译后的数据库表创建语句，这有助于你理解 Django ORM 的工作机制。")]),s._v(" "),n("h3",{attrs:{id:"选择数据库版本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#选择数据库版本"}},[s._v("#")]),s._v(" 选择数据库版本")]),s._v(" "),n("p",[s._v("我们没有安装任何的数据库软件，Django 就帮我们迁移了数据库。这是因为我们使用了 Python 内置的 SQLite3 数据库。"),n("br"),s._v("\nSQLite3 是一个十分轻巧的数据库，它仅有一个文件。"),n("br"),s._v("\n你可以看一到项目根目录下多出了一个 db.sqlite3 的文件，这就是 SQLite3 数据库文件，Django 博客的数据都会保存在这个数据库文件里。"),n("br"),s._v("\nDjango 在 settings.py 里为我们做了一些默认的数据库配置：")]),s._v(" "),n("p",[s._v("blogproject/settings.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("## 其它配置选项...\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    }\n}\n## 其它配置选项...\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("可以看到默认的数据库引擎就是使用的 SQLite3。"),n("br"),s._v("\n当然一些人倾向于使用 MySQL 等大型数据库，至于 Django 如何配置 MySQL 这里就不赘述了，你可以自行使用搜索引擎或者查阅 Django 的官方文档解决。"),n("br"),s._v("\n对于一个小型博客而言，SQLite3 数据库足以胜任。")])])}),[],!1,null,null,null);a.default=e.exports}}]);