(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{354:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("AE-Rain 数据来自于AE-L2A的亮温产品降水猜测，降水反演算法是 GPROF 。所以，AE-Rain数据和2A数据具有天生的同步性，他们的经纬度和轨道是一模一样的，但是，AE-Rain在反演降水是舍弃了边缘的若干列，也就是说AE-L2A最边缘的若干列没有降水信息，这部分样本需要舍弃，不过这部分工作是子collocation部分完成，本节我们只是把地表降水提取，裁剪，缺测，输出。")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#文件夹内容-2b"}},[t._v("- 文件夹内容 2b")])]),a("li",[a("a",{attrs:{href:"#运行"}},[t._v("- 运行")])]),a("li",[a("a",{attrs:{href:"#轨道裁剪和格式化输出"}},[t._v("- 轨道裁剪和格式化输出")])]),a("li",[a("a",{attrs:{href:"#数据说明"}},[t._v("- 数据说明")])]),a("li",[a("a",{attrs:{href:"#建议和问题"}},[t._v("- 建议和问题")])]),a("li",[a("a",{attrs:{href:"#附录"}},[t._v("附录")])])])]),a("p"),t._v(" "),a("p",[t._v("AE-Rain 数据来自于AE-L2A的亮温产品降水猜测，降水反演算法是 GPROF 。所以，AE-Rain数据和2A数据具有天生的同步性，他们的经纬度和轨道是一模一样的，但是，AE-Rain在反演降水是舍弃了边缘的若干列，也就是说AE-L2A最边缘的若干列没有降水信息，这部分样本需要舍弃，不过这部分工作是子collocation部分完成，本节我们只是把地表降水提取，裁剪，缺测，输出。")]),t._v(" "),a("h2",{attrs:{id:"文件夹内容-2b"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件夹内容-2b"}},[t._v("#")]),t._v(" - 文件夹内容 2b")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("+data  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#存储处理过的2b数据，txt格式")]),t._v("\n- preprocess.2b.ncl  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#主要的处理程序，NCL语言编写")]),t._v("\n- ascii2d_rainout.f  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#使用fortran77 编写的NCL子程序，用于格式化输出")]),t._v("\n- ascii2d_rainout.so  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#使用WRAPIT生成的动态库文件，preprocess.2b.ncl会引用此动态库进行格式化输出")]),t._v("\n- batch.sh  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#批量控制脚本，shell语法，用于对大批量的日期进行操作")]),t._v("\n- show.ael2a.ael2b.orbit.ncl  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#绘制2b轨道和2a轨道")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[t._v("#")]),t._v(" - 运行")]),t._v(" "),a("p",[t._v("​       你会发现本部分对于Rain数据的处理和2A数据的处理及其相似，结果也是一致的。实际上要更简单，我们要做的仅仅是提出表面降水率数据Rsurf。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("单个日期处理（如2004年1月1日)")]),t._v(" "),a("p",[t._v("NCL带参运行 yyyymmdd=20040101")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ncl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("yyyymmdd")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040101")]),t._v(" preprocess.2b.ncl \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\tyyyymmdd:20040101\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\thdf files: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\tDone with "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040101")]),t._v("-------------------------\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("运行结果：data文件夹下出现"),a("code",[t._v("AEL2B.SurfaceRain.res5km.20040101.txt")]),t._v("，任务完成。")])]),t._v(" "),a("li",[a("p",[t._v("批量日期处理（如20040102~20040103）")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("batch.sh")]),t._v("脚本")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$sh")]),t._v(" batch.sh "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040102")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040103")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040102")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040102")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\thdf files: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\tDone with "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040102")]),t._v("-------------------------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040103")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040103")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\thdf files: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\tDone with "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040103")]),t._v("-------------------------\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("结果不在赘述，后台方式：")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$nohup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" batch.sh "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040102")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20040103")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" log.20040102-20040103 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"轨道裁剪和格式化输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#轨道裁剪和格式化输出"}},[t._v("#")]),t._v(" - 轨道裁剪和格式化输出")]),t._v(" "),a("p",[t._v("和AE-L2A的处理完全相同，不在赘述。")]),t._v(" "),a("h2",{attrs:{id:"数据说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据说明"}},[t._v("#")]),t._v(" - 数据说明")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("对于AE-Rain的处理，最终输出的数据特征有：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("包含全部的区域内样本，包括海洋和各种表面类型，因为没有landflag。这样导致AE-Rain的样本数要比AE-L2A样本数多很多。以20040101为例（2a:224305; 2b:595929）。所以这两者的样本序号不具有一一对应关系。")])]),t._v(" "),a("li",[a("p",[t._v("处理比2A数据多了80%以下陆地样本，2b在边缘若干列没有降水猜测，没有输出。")])]),t._v(" "),a("li",[a("p",[t._v("包含Aqua的上行轨道样本，过境时间一般在当地时14:00左右，具体以ScanTime为准。")])]),t._v(" "),a("li",[a("p",[t._v("输出参数包含样本序号，经纬度，扫描时间，陆地分数，12通道亮温等，详见表1。")]),t._v(" "),a("p",[t._v("表1. 输出参数详情")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("参数")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("ip")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("lon")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("lat")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Time")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("RRsurf")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("RRcon")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("说明")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("序号")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("经度")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("纬度")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("扫描时间")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("地表降水率")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("对流降水率")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("有效范围")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("自然数")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("70-145")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("10-55")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("UTC时间（单位小时）")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("mm/hr")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("mm/hr")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("输出类型")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("I6")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("F12.6")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("F12.6")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("F12.6")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("F12.6")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("F12.6")])])])])]),t._v(" "),a("li",[a("p",[t._v("输出文件示例：")]),t._v(" "),a("p",[a("code",[t._v("AEL2B.SurfaceRain.res5km.20040101.txt")]),t._v("，格式化ascii文件。")]),t._v(" "),a("div",{staticClass:"language-txt line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("202389  118.651375   10.526302    5.750000    0.000000    0.000000\n202390  118.612495   10.540219    5.750000    0.027330    0.022560\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[a("code",[t._v("ascii2d_rainout.f")]),t._v("中以上参数按序输出：")]),t._v(" "),a("div",{staticClass:"language-fortran 77 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-fortran"}},[a("code",[t._v("       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("lon1d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("lat1d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Time_1D"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("              RRsurf_1D"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" RRcon_1D"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("I6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("F12."),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"建议和问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#建议和问题"}},[t._v("#")]),t._v(" - 建议和问题")]),t._v(" "),a("ul",[a("li",[t._v("虽然我们使用降水数据是为了去除降水，但是，不能只输出有降水的样本最为剔除依据。因为有效的AE-L2A样本必须有降水数据，且必须降水率为0，对于降水数据缺测的样本只好舍弃。")]),t._v(" "),a("li",[t._v("对流降水率没用到。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"附录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附录"}},[t._v("#")]),t._v(" 附录")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("降水")]),t._v(" "),a("img",{staticStyle:{width:"500px",height:"300px"},attrs:{src:"https://ws1.sinaimg.cn/large/005zDzHply1g4ft7sezrej30of0hu78s.jpg"}})]),t._v(" "),a("li",[a("p",[t._v("AE-L2A轨道和AE-Rain轨道的对比")]),t._v(" "),a("p",[t._v("可以看到rain产品轨道较窄。")]),t._v(" "),a("img",{staticStyle:{width:"500px",height:"300px"},attrs:{src:"https://ws1.sinaimg.cn/large/005zDzHply1g4ftaki5vaj30nt0hp43n.jpg"}})])]),t._v(" "),a("p",[t._v("© Jihenghu 2019")])])}),[],!1,null,null,null);s.default=e.exports}}]);